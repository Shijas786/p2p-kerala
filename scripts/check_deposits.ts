import { ethers } from 'ethers'; async function main() { const p = new ethers.JsonRpcProvider('https://mainnet.base.org'); const c = new ethers.Contract('0x78c2B85759C5F7d58fEea82D0Be098E540272245', ['event Deposit(address indexed user, address indexed token, uint256 amount)'], p); const filter = c.filters.Deposit(); const logs = await c.queryFilter(filter, -10000); console.log('Recent Deposits:', logs.length); logs.forEach((l: any) => { console.log('User:', l.args[0], 'Amt:', l.args[2].toString()); }); } main();
